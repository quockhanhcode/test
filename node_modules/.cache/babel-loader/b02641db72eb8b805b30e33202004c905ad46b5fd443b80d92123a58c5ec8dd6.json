{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\nexport const preferencePanelStateInitializer = (state, props) => {\n  var _props$initialState$p, _props$initialState;\n  return _extends({}, state, {\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\n      open: false\n    }\n  });\n};\n\n/**\r\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\r\n */\nexport const useGridPreferencesPanel = (apiRef, props) => {\n  var _props$initialState3;\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\n  const hideTimeout = React.useRef();\n  const immediateTimeout = React.useRef();\n\n  /**\r\n   * API METHODS\r\n   */\n  const hidePreferences = React.useCallback(() => {\n    logger.debug('Hiding Preferences Panel');\n    const preferencePanelState = gridPreferencePanelStateSelector(apiRef.current.state);\n    if (preferencePanelState.openedPanelValue) {\n      apiRef.current.publishEvent('preferencePanelClose', {\n        openedPanelValue: preferencePanelState.openedPanelValue\n      });\n    }\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: {\n        open: false\n      }\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef, logger]);\n\n  // This is to prevent the preferences from closing when you open a select box or another panel,\n  // The issue is in MUI core V4 => Fixed in V5\n  const doNotHidePanel = React.useCallback(() => {\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\n  }, []);\n\n  // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\n  // we can cancel the action if the trigger element still need the panel...\n  const hidePreferencesDelayed = React.useCallback(() => {\n    hideTimeout.current = setTimeout(hidePreferences, 100);\n  }, [hidePreferences]);\n  const showPreferences = React.useCallback((newValue, panelId, labelId) => {\n    logger.debug('Opening Preferences Panel');\n    doNotHidePanel();\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: _extends({}, state.preferencePanel, {\n        open: true,\n        openedPanelValue: newValue,\n        panelId,\n        labelId\n      })\n    }));\n    apiRef.current.publishEvent('preferencePanelOpen', {\n      openedPanelValue: newValue\n    });\n    apiRef.current.forceUpdate();\n  }, [logger, doNotHidePanel, apiRef]);\n  useGridApiMethod(apiRef, {\n    showPreferences,\n    hidePreferences: hidePreferencesDelayed\n  }, 'public');\n\n  /**\r\n   * PRE-PROCESSING\r\n   */\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2;\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\n    const shouldExportPreferencePanel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the panel was initialized\n    ((_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.preferencePanel) != null ||\n    // Always export if the panel is opened\n    preferencePanelToExport.open;\n    if (!shouldExportPreferencePanel) {\n      return prevState;\n    }\n    return _extends({}, prevState, {\n      preferencePanel: preferencePanelToExport\n    });\n  }, [apiRef, (_props$initialState3 = props.initialState) == null ? void 0 : _props$initialState3.preferencePanel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    const preferencePanel = context.stateToRestore.preferencePanel;\n    if (preferencePanel != null) {\n      apiRef.current.setState(state => _extends({}, state, {\n        preferencePanel\n      }));\n    }\n    return params;\n  }, [apiRef]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n\n  /**\r\n   * EFFECTS\r\n   */\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(hideTimeout.current);\n      clearTimeout(immediateTimeout.current);\n    };\n  }, []);\n};","map":{"version":3,"names":["_extends","React","useGridApiMethod","useGridLogger","useGridRegisterPipeProcessor","gridPreferencePanelStateSelector","preferencePanelStateInitializer","state","props","_props$initialState$p","_props$initialState","preferencePanel","initialState","open","useGridPreferencesPanel","apiRef","_props$initialState3","logger","hideTimeout","useRef","immediateTimeout","hidePreferences","useCallback","debug","preferencePanelState","current","openedPanelValue","publishEvent","setState","forceUpdate","doNotHidePanel","setTimeout","clearTimeout","hidePreferencesDelayed","showPreferences","newValue","panelId","labelId","stateExportPreProcessing","prevState","context","_props$initialState2","preferencePanelToExport","shouldExportPreferencePanel","exportOnlyDirtyModels","stateRestorePreProcessing","params","stateToRestore","useEffect"],"sources":["C:/Users/KhanhHQ/Desktop/test/node_modules/@mui/x-data-grid/hooks/features/preferencesPanel/useGridPreferencesPanel.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport * as React from 'react';\r\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\r\nimport { useGridLogger } from '../../utils/useGridLogger';\r\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\r\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\r\nexport const preferencePanelStateInitializer = (state, props) => {\r\n  var _props$initialState$p, _props$initialState;\r\n  return _extends({}, state, {\r\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\r\n      open: false\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\r\n */\r\nexport const useGridPreferencesPanel = (apiRef, props) => {\r\n  var _props$initialState3;\r\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\r\n  const hideTimeout = React.useRef();\r\n  const immediateTimeout = React.useRef();\r\n\r\n  /**\r\n   * API METHODS\r\n   */\r\n  const hidePreferences = React.useCallback(() => {\r\n    logger.debug('Hiding Preferences Panel');\r\n    const preferencePanelState = gridPreferencePanelStateSelector(apiRef.current.state);\r\n    if (preferencePanelState.openedPanelValue) {\r\n      apiRef.current.publishEvent('preferencePanelClose', {\r\n        openedPanelValue: preferencePanelState.openedPanelValue\r\n      });\r\n    }\r\n    apiRef.current.setState(state => _extends({}, state, {\r\n      preferencePanel: {\r\n        open: false\r\n      }\r\n    }));\r\n    apiRef.current.forceUpdate();\r\n  }, [apiRef, logger]);\r\n\r\n  // This is to prevent the preferences from closing when you open a select box or another panel,\r\n  // The issue is in MUI core V4 => Fixed in V5\r\n  const doNotHidePanel = React.useCallback(() => {\r\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\r\n  }, []);\r\n\r\n  // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\r\n  // we can cancel the action if the trigger element still need the panel...\r\n  const hidePreferencesDelayed = React.useCallback(() => {\r\n    hideTimeout.current = setTimeout(hidePreferences, 100);\r\n  }, [hidePreferences]);\r\n  const showPreferences = React.useCallback((newValue, panelId, labelId) => {\r\n    logger.debug('Opening Preferences Panel');\r\n    doNotHidePanel();\r\n    apiRef.current.setState(state => _extends({}, state, {\r\n      preferencePanel: _extends({}, state.preferencePanel, {\r\n        open: true,\r\n        openedPanelValue: newValue,\r\n        panelId,\r\n        labelId\r\n      })\r\n    }));\r\n    apiRef.current.publishEvent('preferencePanelOpen', {\r\n      openedPanelValue: newValue\r\n    });\r\n    apiRef.current.forceUpdate();\r\n  }, [logger, doNotHidePanel, apiRef]);\r\n  useGridApiMethod(apiRef, {\r\n    showPreferences,\r\n    hidePreferences: hidePreferencesDelayed\r\n  }, 'public');\r\n\r\n  /**\r\n   * PRE-PROCESSING\r\n   */\r\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\r\n    var _props$initialState2;\r\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\r\n    const shouldExportPreferencePanel =\r\n    // Always export if the `exportOnlyDirtyModels` property is not activated\r\n    !context.exportOnlyDirtyModels ||\r\n    // Always export if the panel was initialized\r\n    ((_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.preferencePanel) != null ||\r\n    // Always export if the panel is opened\r\n    preferencePanelToExport.open;\r\n    if (!shouldExportPreferencePanel) {\r\n      return prevState;\r\n    }\r\n    return _extends({}, prevState, {\r\n      preferencePanel: preferencePanelToExport\r\n    });\r\n  }, [apiRef, (_props$initialState3 = props.initialState) == null ? void 0 : _props$initialState3.preferencePanel]);\r\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\r\n    const preferencePanel = context.stateToRestore.preferencePanel;\r\n    if (preferencePanel != null) {\r\n      apiRef.current.setState(state => _extends({}, state, {\r\n        preferencePanel\r\n      }));\r\n    }\r\n    return params;\r\n  }, [apiRef]);\r\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\r\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\r\n\r\n  /**\r\n   * EFFECTS\r\n   */\r\n  React.useEffect(() => {\r\n    return () => {\r\n      clearTimeout(hideTimeout.current);\r\n      clearTimeout(immediateTimeout.current);\r\n    };\r\n  }, []);\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}